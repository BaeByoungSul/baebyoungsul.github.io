import{$b as me,Ab as E,Ba as g,Bb as h,Ca as n,Cb as G,Da as i,Db as $,Ea as l,Eb as we,Fb as V,Hb as W,Ia as F,K as le,La as P,Ma as p,Qa as ge,Qb as Se,Ra as fe,Sa as he,T as v,Ta as _e,U as ce,Ua as k,V as ne,Va as ve,Vb as Ee,Wa as Ce,Wb as j,Xa as m,Xb as q,Ya as f,Yb as U,Z as ae,Za as I,Zb as z,_ as de,_b as H,ab as w,ac as Q,bb as S,bc as Y,bd as X,cb as ye,ga as pe,hd as J,ib as R,id as K,ja as s,jb as xe,kb as T,kd as be,lb as Me,nb as L,pa as C,ra as y,sa as x,sb as A,tb as O,v as b,va as ue,vb as se,wa as M,wb as N,xa as c,xb as u,ya as d,yb as B,zb as D}from"./chunk-34NYAPRQ.js";var Ie=["determinateSpinner"];function Re(r,o){if(r&1&&(ae(),n(0,"svg",11),l(1,"circle",12),i()),r&2){let e=p();M("viewBox",e._viewBox()),s(),k("stroke-dasharray",e._strokeCircumference(),"px")("stroke-dashoffset",e._strokeCircumference()/2,"px")("stroke-width",e._circleStrokeWidth(),"%"),M("r",e._circleRadius())}}var Te=new ce("mat-progress-spinner-default-options",{providedIn:"root",factory:Le});function Le(){return{diameter:Fe}}var Fe=100,Ae=10,ee=(()=>{class r{_elementRef=ne(pe);_noopAnimations;get color(){return this._color||this._defaultColor}set color(e){this._color=e}_color;_defaultColor="primary";_determinateCircle;constructor(){let e=ne(Te),t=Se(),a=this._elementRef.nativeElement;this._noopAnimations=t==="di-disabled"&&!!e&&!e._forceAnimations,this.mode=a.nodeName.toLowerCase()==="mat-spinner"?"indeterminate":"determinate",!this._noopAnimations&&t==="reduced-motion"&&a.classList.add("mat-progress-spinner-reduced-motion"),e&&(e.color&&(this.color=this._defaultColor=e.color),e.diameter&&(this.diameter=e.diameter),e.strokeWidth&&(this.strokeWidth=e.strokeWidth))}mode;get value(){return this.mode==="determinate"?this._value:0}set value(e){this._value=Math.max(0,Math.min(100,e||0))}_value=0;get diameter(){return this._diameter}set diameter(e){this._diameter=e||0}_diameter=Fe;get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(e){this._strokeWidth=e||0}_strokeWidth;_circleRadius(){return(this.diameter-Ae)/2}_viewBox(){let e=this._circleRadius()*2+this.strokeWidth;return`0 0 ${e} ${e}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return this.mode==="determinate"?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=y({type:r,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(t,a){if(t&1&&ge(Ie,5),t&2){let _;fe(_=he())&&(a._determinateCircle=_.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:18,hostBindings:function(t,a){t&2&&(M("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow",a.mode==="determinate"?a.value:null)("mode",a.mode),Ce("mat-"+a.color),k("width",a.diameter,"px")("height",a.diameter,"px")("--mat-progress-spinner-size",a.diameter+"px")("--mat-progress-spinner-active-indicator-width",a.diameter+"px"),ve("_mat-animation-noopable",a._noopAnimations)("mdc-circular-progress--indeterminate",a.mode==="indeterminate"))},inputs:{color:"color",mode:"mode",value:[2,"value","value",R],diameter:[2,"diameter","diameter",R],strokeWidth:[2,"strokeWidth","strokeWidth",R]},exportAs:["matProgressSpinner"],decls:14,vars:11,consts:[["circle",""],["determinateSpinner",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(t,a){if(t&1&&(ue(0,Re,2,8,"ng-template",null,0,ye),n(2,"div",2,1),ae(),n(4,"svg",3),l(5,"circle",4),i()(),de(),n(6,"div",5)(7,"div",6)(8,"div",7),F(9,8),i(),n(10,"div",9),F(11,8),i(),n(12,"div",10),F(13,8),i()()()),t&2){let _=_e(1);s(4),M("viewBox",a._viewBox()),s(),k("stroke-dasharray",a._strokeCircumference(),"px")("stroke-dashoffset",a._strokeDashOffset(),"px")("stroke-width",a._circleStrokeWidth(),"%"),M("r",a._circleRadius()),s(4),g("ngTemplateOutlet",_),s(2),g("ngTemplateOutlet",_),s(2),g("ngTemplateOutlet",_)}},dependencies:[xe],styles:[`.mat-mdc-progress-spinner{--mat-progress-spinner-animation-multiplier: 1;display:block;overflow:hidden;line-height:0;position:relative;direction:ltr;transition:opacity 250ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-progress-spinner circle{stroke-width:var(--mat-progress-spinner-active-indicator-width, 4px)}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}}.mat-progress-spinner-reduced-motion{--mat-progress-spinner-animation-multiplier: 1.25}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1;animation:mdc-circular-progress-container-rotate calc(1568.2352941176ms*var(--mat-progress-spinner-animation-multiplier)) linear infinite}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mat-progress-spinner-active-indicator-color, var(--mat-sys-primary))}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin calc(1333ms*var(--mat-progress-spinner-animation-multiplier)) cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin calc(1333ms*var(--mat-progress-spinner-animation-multiplier)) cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate calc(5332ms*var(--mat-progress-spinner-animation-multiplier)) cubic-bezier(0.4, 0, 0.2, 1) infinite both}@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}
`],encapsulation:2,changeDetection:0})}return r})();var re=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=x({type:r});static \u0275inj=v({imports:[Ee]})}return r})();function We(r,o){r&1&&(l(0,"div"),n(1,"pre"),m(2),w(3,"json"),i()),r&2&&(s(2),f(S(3,1,o)))}function je(r,o){if(r&1&&(n(0,"mat-error"),m(1),i()),r&2){let e=p();s(),f(e.getErrorMsg("email"))}}function qe(r,o){if(r&1&&(n(0,"mat-error"),m(1),i()),r&2){let e=p();s(),f(e.getErrorMsg("password"))}}function Ue(r,o){r&1&&(n(0,"mat-icon"),l(1,"mat-spinner",10),i())}function ze(r,o){if(r&1&&(l(0,"p"),n(1,"div",11),m(2),i()),r&2){let e=p();s(2),I(" ",e.serverError," ")}}var te=class r{constructor(o,e){this.authService$=o;this.router$=e;this.currentUser$=this.authService$.user$}loading$=new b(!1);serverError=null;currentUser$;myform=new E({email:new h("",[u.required,u.email]),password:new h("",[u.required])});ngOnInit(){this.authService$.isLoggedIn().pipe(le(1)).subscribe(o=>{o&&this.router$.navigate(["/home/memo-viewer"],{skipLocationChange:!0})})}onSignIn(){if(this.myform.invalid){this.serverError="form is invalid!";return}this.loading$.next(!0);let o=this.myform.value;this.authService$.signIn(o.email,o.password).then(()=>{console.log("\uB85C\uADF8\uC778 \uC131\uACF5"),this.router$.navigate(["/home/memo-viewer"],{skipLocationChange:!0}),this.loading$.next(!1)}).catch(e=>{this.serverError=e,this.loading$.next(!1)})}onSignInWithGoogle(){this.authService$.signInWithGoogle().then(()=>console.log("Google \uB85C\uADF8\uC778 \uC131\uACF5")).catch(o=>console.error("Google \uB85C\uADF8\uC778 \uC2E4\uD328:",o))}onLogout(){this.authService$.logout().then(()=>console.log("\uB85C\uADF8\uC544\uC6C3 \uC131\uACF5")).catch(o=>console.error("\uB85C\uADF8\uC544\uC6C3 \uC2E4\uD328:",o))}getErrorMsg(o){let e=this.myform.get(o);var t,a;return e?.hasError("maxlength")&&(t=e.errors?.maxlength.requiredLength),e?.hasError("minlength")&&(t=e.errors?.minlength.requiredLength),e?.hasError("required")?"This field is required ":e?.hasError("pattern")?"This field needs to be at least nine characters, one uppercase letter and at least 1 symbol":e?.hasError("email")?"Not a valid email":e?.hasError("minlength")?`This field must be at least ${a} characters long `:e?.hasError("maxlength")?`This field can be max ${t} characters long.`:""}static \u0275fac=function(e){return new(e||r)(C(X),C(A))};static \u0275cmp=y({type:r,selectors:[["app-login"]],decls:26,vars:10,consts:[[1,"top-container"],[1,"input-container"],[3,"ngSubmit","formGroup"],["appearance","outline","floatLabel","always"],["matInput","","type","email","placeholder","Enter your email","formControlName","email"],["matInput","","type","password","placeholder","Enter your password","formControlName","password"],[1,"button-container"],["mat-raised-button","","color","primary"],[2,"flex-grow","1"],["routerLink","../register","skipLocationChange","true"],["color","accent","diameter","20"],[1,"alert","alert-danger"]],template:function(e,t){if(e&1&&(c(0,We,4,3),w(1,"async"),n(2,"div",0)(3,"fieldset",1)(4,"legend"),m(5,"\uB85C\uADF8\uC778 \uC815\uBCF4"),i(),n(6,"form",2),P("ngSubmit",function(){return t.onSignIn()}),n(7,"mat-form-field",3)(8,"mat-label"),m(9,"Email"),i(),l(10,"input",4),c(11,je,2,1,"mat-error"),i(),n(12,"mat-form-field",3)(13,"mat-label"),m(14,"Password"),i(),l(15,"input",5),c(16,qe,2,1,"mat-error"),i(),n(17,"div",6)(18,"button",7),m(19,"Login "),c(20,Ue,2,0,"mat-icon"),w(21,"async"),i(),l(22,"span",8),n(23,"a",9),m(24,"Register"),i()(),c(25,ze,3,1),i()()()),e&2){let a;d((a=S(1,6,t.currentUser$))?0:-1,a),s(6),g("formGroup",t.myform),s(5),d(t.myform.controls.email.invalid?11:-1),s(5),d(t.myform.controls.password.invalid?16:-1),s(4),d(S(21,8,t.loading$)?20:-1),s(5),d(t.serverError?25:-1)}},dependencies:[q,j,Y,Q,H,U,z,K,J,re,ee,W,G,N,B,D,$,V,O,T,Me],styles:[".top-container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:row;justify-content:center;align-items:start}.input-container[_ngcontent-%COMP%]{margin-top:100px;padding:20px;width:500px;border:1px solid lightgray;border-radius:5px;display:flex;flex-direction:column;gap:10px}form[_ngcontent-%COMP%]{display:flex;flex-direction:column}form[_ngcontent-%COMP%] > .button-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:end}"]})};function He(r,o){if(r&1&&(n(0,"mat-error"),m(1),i()),r&2){let e=p();s(),f(e.getErrorMsg("email"))}}function Qe(r,o){if(r&1&&(n(0,"mat-error"),m(1),i()),r&2){let e=p();s(),f(e.getErrorMsg("passwordGroup.password"))}}function Ye(r,o){if(r&1&&(n(0,"mat-error"),m(1),i()),r&2){let e=p();s(),f(e.getErrorMsg("passwordGroup.confirmPassword"))}}function Xe(r,o){r&1&&(n(0,"mat-error"),m(1,"Passwords must match"),i())}function Je(r,o){r&1&&(n(0,"mat-icon"),l(1,"mat-spinner",12),i())}function Ke(r,o){r&1&&(n(0,"h2"),m(1,"\uC815\uC0C1\uC801\uC73C\uB85C \uB4F1\uB85D\uC774 \uB418\uC5C8\uC2B5\uB2C8\uB2E4."),i(),n(2,"h3"),m(3,"\uC774\uBA54\uC77C\uC744 \uD655\uC778\uD558\uC5EC \uBA54\uC77C \uB0B4\uC6A9\uC5D0 \uC788\uB294 \uB9C1\uD06C\uB97C \uD074\uB9AD\uD574\uC8FC\uC138\uC694"),i())}function Ze(r,o){if(r&1&&(l(0,"p"),n(1,"div",13),m(2),i()),r&2){let e=p();s(2),I(" ",e.errorMessage," ")}}var ie=class r{constructor(o,e){this.authService$=o;this.router$=e}loading$=new b(!1);isSubmitOk=!1;errorMessage="";myForm=new E({email:new h("",[u.required,u.email]),passwordGroup:new E({password:new h("",[u.required,u.minLength(6),u.maxLength(12)]),confirmPassword:new h("",[u.required])},{validators:this.matchValidator})});onSubmit(){if(this.errorMessage="",this.myForm.invalid){this.errorMessage="form is invalid!";return}this.loading$.next(!0);let o=this.myForm.value,e=this.myForm.controls.email.value,t=this.myForm.controls.passwordGroup.controls.password.value;if(!e){this.errorMessage="email is invalid!";return}if(!t){this.errorMessage="password is invalid!";return}this.authService$.signUp(e,t).then(()=>{console.log("\uB85C\uADF8\uC778 \uC131\uACF5"),this.router$.navigate(["/home/memo-viewer"],{skipLocationChange:!0}),this.loading$.next(!1)}).catch(a=>{this.errorMessage=a,this.loading$.next(!1)})}matchValidator(){return o=>{let e=o.get("password"),t=o.get("confirmPassword");return e&&t&&e.value!==t.value?{mustMatch:!0}:null}}getErrorMsg(o){let e=this.myForm.get(o);var t,a;return e?.hasError("maxlength")&&(t=e.errors?.maxlength.requiredLength),e?.hasError("minlength")&&(t=e.errors?.minlength.requiredLength),e?.hasError("required")?"This field is required ":e?.hasError("pattern")?"This field needs to be at least nine characters, one uppercase letter and at least 1 symbol":e?.hasError("email")||e?.hasError("email")?"Not a valid email":e?.hasError("minlength")?`This field must be at least ${a} characters long `:e?.hasError("maxlength")?`This field can be max ${t} characters long.`:""}static \u0275fac=function(e){return new(e||r)(C(X),C(A))};static \u0275cmp=y({type:r,selectors:[["app-register"]],decls:32,vars:10,consts:[[1,"top-container"],[1,"input-container"],[3,"ngSubmit","formGroup"],["appearance","outline","floatLabel","always"],["matInput","","placeholder","Enter your email","formControlName","email"],["formGroupName","passwordGroup",1,"password-container"],["matInput","","type","password","placeholder","Enter your password","formControlName","password"],["matInput","","type","password","placeholder","Enter your confirm password","formControlName","confirmPassword"],[1,"button-container"],["mat-raised-button","","color","primary"],[2,"flex-grow","1"],["routerLink","../login","skipLocationChange","true"],["color","accent","diameter","20"],[1,"alert","alert-danger"]],template:function(e,t){e&1&&(n(0,"div",0)(1,"fieldset",1)(2,"legend"),m(3,"\uC0AC\uC6A9\uC790 \uC815\uBCF4"),i(),n(4,"form",2),P("ngSubmit",function(){return t.onSubmit()}),n(5,"mat-form-field",3)(6,"mat-label"),m(7,"Email"),i(),l(8,"input",4),c(9,He,2,1,"mat-error"),i(),n(10,"div",5)(11,"mat-form-field",3)(12,"mat-label"),m(13,"Password"),i(),l(14,"input",6),c(15,Qe,2,1,"mat-error"),i(),n(16,"mat-form-field",3)(17,"mat-label"),m(18,"Password"),i(),l(19,"input",7),c(20,Ye,2,1,"mat-error"),i(),c(21,Xe,2,0,"mat-error"),i(),n(22,"div",8)(23,"button",9),m(24,"Register "),c(25,Je,2,0,"mat-icon"),w(26,"async"),i(),l(27,"span",10),n(28,"a",11),m(29,"Cancel"),i()(),c(30,Ke,4,0),c(31,Ze,3,1),i()()()),e&2&&(s(4),g("formGroup",t.myForm),s(5),d(t.myForm.controls.email.invalid?9:-1),s(6),d(t.myForm.controls.passwordGroup.controls.password.invalid?15:-1),s(5),d(t.myForm.controls.passwordGroup.controls.confirmPassword.invalid?20:-1),s(),d(t.myForm.controls.passwordGroup.invalid&&t.myForm.controls.passwordGroup.hasError("mustMatch")&&t.myForm.controls.passwordGroup.controls.confirmPassword.dirty&&(t.myForm.controls.passwordGroup.dirty||t.myForm.controls.passwordGroup.touched)?21:-1),s(4),d(S(26,8,t.loading$)?25:-1),s(5),d(t.isSubmitOk?30:-1),s(),d(t.errorMessage?31:-1))},dependencies:[L,O,W,G,N,B,D,$,V,we,me,H,U,z,Y,Q,K,J,re,ee,q,j,T],styles:[".top-container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:row;justify-content:center;align-items:start}.input-container[_ngcontent-%COMP%]{margin-top:100px;padding:20px;width:500px;border:1px solid lightgray;border-radius:5px;display:flex;flex-direction:column;gap:10px}button[_ngcontent-%COMP%]{width:120px}form[_ngcontent-%COMP%]{display:flex;flex-direction:column}form[_ngcontent-%COMP%] > .password-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}form[_ngcontent-%COMP%] > .button-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:end}"]})};var er=[{path:"",component:be,children:[{path:"login",component:te},{path:"register",component:ie}]}],oe=class r{static \u0275fac=function(e){return new(e||r)};static \u0275mod=x({type:r});static \u0275inj=v({imports:[se.forChild(er),se]})};var ke=class r{static \u0275fac=function(e){return new(e||r)};static \u0275mod=x({type:r});static \u0275inj=v({imports:[L,oe]})};export{ke as AuthModule};
