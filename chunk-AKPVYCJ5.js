import{Aa as d,Ab as L,Bb as P,Db as Z,Eb as R,Fb as p,Gb as T,H as E,Ha as S,Hb as G,Ia as u,Ib as M,Jb as g,Kb as N,Lb as $,Mb as re,Nb as B,Rb as A,Ta as l,Ua as f,Va as b,ab as C,bb as x,da as a,dc as O,ec as D,fc as V,gc as j,hc as q,i as y,ic as ee,jc as k,ka as h,kc as U,ld as H,ma as _,md as W,na as w,nd as X,qb as I,rb as ie,ta as m,tb as v,ua as s,vd as oe,wd as Y,xa as F,xd as z,ya as n,za as o}from"./chunk-SQSKJITS.js";function ge(t,i){if(t&1&&(n(0,"mat-error"),l(1),o()),t&2){let e=u();a(),f(e.getErrorMsg("email"))}}function he(t,i){if(t&1&&(n(0,"mat-error"),l(1),o()),t&2){let e=u();a(),f(e.getErrorMsg("password"))}}function Ce(t,i){t&1&&(n(0,"mat-icon"),d(1,"mat-spinner",10),o())}function xe(t,i){if(t&1&&(d(0,"p"),n(1,"div",11),l(2),o()),t&2){let e=u();a(2),b(" ",e.serverError," ")}}function ve(t,i){t&1&&(d(0,"div"),n(1,"pre"),l(2),C(3,"json"),o()),t&2&&(a(2),f(x(3,1,i)))}var J=class t{constructor(i,e){this.authService$=i;this.router$=e;this.currentUser$=this.authService$.user$}loading$=new y(!1);serverError=null;currentUser$;myform=new M({email:new g("",[p.required,p.email]),password:new g("",[p.required])});ngOnInit(){}onSignIn(){if(this.myform.invalid){this.serverError="form is invalid!";return}this.loading$.next(!0);let i=this.myform.value;this.authService$.signIn(i.email,i.password).then(()=>{console.log("\uB85C\uADF8\uC778 \uC131\uACF5"),this.router$.navigate(["/memo-viewer"],{skipLocationChange:!0}),this.loading$.next(!1)}).catch(e=>{this.serverError=e,this.loading$.next(!1)})}onSignInWithGoogle(){this.authService$.signInWithGoogle().then(()=>console.log("Google \uB85C\uADF8\uC778 \uC131\uACF5")).catch(i=>console.error("Google \uB85C\uADF8\uC778 \uC2E4\uD328:",i))}onLogout(){this.authService$.logout().then(()=>console.log("\uB85C\uADF8\uC544\uC6C3 \uC131\uACF5")).catch(i=>console.error("\uB85C\uADF8\uC544\uC6C3 \uC2E4\uD328:",i))}getErrorMsg(i){let e=this.myform.get(i);var r,c;return e?.hasError("maxlength")&&(r=e.errors?.maxlength.requiredLength),e?.hasError("minlength")&&(r=e.errors?.minlength.requiredLength),e?.hasError("required")?"This field is required ":e?.hasError("pattern")?"This field needs to be at least nine characters, one uppercase letter and at least 1 symbol":e?.hasError("email")?"Not a valid email":e?.hasError("minlength")?`This field must be at least ${c} characters long `:e?.hasError("maxlength")?`This field can be max ${r} characters long.`:""}static \u0275fac=function(e){return new(e||t)(h(H),h(L))};static \u0275cmp=_({type:t,selectors:[["app-login"]],decls:26,vars:10,consts:[[1,"top-container"],[1,"input-container"],[3,"ngSubmit","formGroup"],["appearance","outline","floatLabel","always"],["matInput","","type","email","placeholder","Enter your email","formControlName","email"],["matInput","","type","password","placeholder","Enter your password","formControlName","password"],[1,"button-container"],["mat-raised-button","","color","primary"],[2,"flex-grow","1"],["routerLink","../register","skipLocationChange","true"],["color","accent","diameter","20"],[1,"alert","alert-danger"]],template:function(e,r){if(e&1&&(n(0,"div",0)(1,"fieldset",1)(2,"legend"),l(3,"\uB85C\uADF8\uC778 \uC815\uBCF4"),o(),n(4,"form",2),S("ngSubmit",function(){return r.onSignIn()}),n(5,"mat-form-field",3)(6,"mat-label"),l(7,"Email"),o(),d(8,"input",4),m(9,ge,2,1,"mat-error"),o(),n(10,"mat-form-field",3)(11,"mat-label"),l(12,"Password"),o(),d(13,"input",5),m(14,he,2,1,"mat-error"),o(),n(15,"div",6)(16,"button",7),l(17,"Login "),m(18,Ce,2,0,"mat-icon"),C(19,"async"),o(),d(20,"span",8),n(21,"a",9),l(22,"Register"),o()(),m(23,xe,3,1),o()()(),m(24,ve,4,3),C(25,"async")),e&2){let c;a(4),F("formGroup",r.myform),a(5),s(r.myform.controls.email.invalid?9:-1),a(5),s(r.myform.controls.password.invalid?14:-1),a(4),s(x(19,6,r.loading$)?18:-1),a(5),s(r.serverError?23:-1),a(),s((c=x(25,8,r.currentUser$))?24:-1,c)}},dependencies:[v,D,O,U,k,q,V,j,X,W,z,Y,A,N,R,T,G,$,B,P,I,ie],styles:[".top-container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:row;justify-content:center;align-items:start}.input-container[_ngcontent-%COMP%]{margin-top:100px;padding:20px;width:500px;border:1px solid lightgray;border-radius:5px;display:flex;flex-direction:column;gap:10px}form[_ngcontent-%COMP%]{display:flex;flex-direction:column}form[_ngcontent-%COMP%] > .button-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:end}"]})};function Me(t,i){if(t&1&&(n(0,"mat-error"),l(1),o()),t&2){let e=u();a(),f(e.getErrorMsg("email"))}}function ye(t,i){if(t&1&&(n(0,"mat-error"),l(1),o()),t&2){let e=u();a(),f(e.getErrorMsg("passwordGroup.password"))}}function Ee(t,i){if(t&1&&(n(0,"mat-error"),l(1),o()),t&2){let e=u();a(),f(e.getErrorMsg("passwordGroup.confirmPassword"))}}function _e(t,i){t&1&&(n(0,"mat-error"),l(1,"Passwords must match"),o())}function we(t,i){t&1&&(n(0,"mat-icon"),d(1,"mat-spinner",12),o())}function Fe(t,i){t&1&&(n(0,"h2"),l(1,"\uC815\uC0C1\uC801\uC73C\uB85C \uB4F1\uB85D\uC774 \uB418\uC5C8\uC2B5\uB2C8\uB2E4."),o(),n(2,"h3"),l(3,"\uC774\uBA54\uC77C\uC744 \uD655\uC778\uD558\uC5EC \uBA54\uC77C \uB0B4\uC6A9\uC5D0 \uC788\uB294 \uB9C1\uD06C\uB97C \uD074\uB9AD\uD574\uC8FC\uC138\uC694"),o())}function Se(t,i){if(t&1&&(d(0,"p"),n(1,"div",13),l(2),o()),t&2){let e=u();a(2),b(" ",e.errorMessage," ")}}var K=class t{constructor(i,e){this.authService$=i;this.router$=e}loading$=new y(!1);isSubmitOk=!1;errorMessage="";myForm=new M({email:new g("",[p.required,p.email]),passwordGroup:new M({password:new g("",[p.required,p.minLength(6),p.maxLength(12)]),confirmPassword:new g("",[p.required])},{validators:this.matchValidator})});onSubmit(){if(this.errorMessage="",this.myForm.invalid){this.errorMessage="form is invalid!";return}this.loading$.next(!0);let i=this.myForm.value,e=this.myForm.controls.email.value,r=this.myForm.controls.passwordGroup.controls.password.value;if(!e){this.errorMessage="email is invalid!";return}if(!r){this.errorMessage="password is invalid!";return}this.authService$.signUp(e,r).then(()=>{console.log("\uB85C\uADF8\uC778 \uC131\uACF5"),this.router$.navigate(["/home/memo-viewer"],{skipLocationChange:!0}),this.loading$.next(!1)}).catch(c=>{this.errorMessage=c,this.loading$.next(!1)})}matchValidator(){return i=>{let e=i.get("password"),r=i.get("confirmPassword");return e&&r&&e.value!==r.value?{mustMatch:!0}:null}}getErrorMsg(i){let e=this.myForm.get(i);var r,c;return e?.hasError("maxlength")&&(r=e.errors?.maxlength.requiredLength),e?.hasError("minlength")&&(r=e.errors?.minlength.requiredLength),e?.hasError("required")?"This field is required ":e?.hasError("pattern")?"This field needs to be at least nine characters, one uppercase letter and at least 1 symbol":e?.hasError("email")||e?.hasError("email")?"Not a valid email":e?.hasError("minlength")?`This field must be at least ${c} characters long `:e?.hasError("maxlength")?`This field can be max ${r} characters long.`:""}static \u0275fac=function(e){return new(e||t)(h(H),h(L))};static \u0275cmp=_({type:t,selectors:[["app-register"]],decls:32,vars:10,consts:[[1,"top-container"],[1,"input-container"],[3,"ngSubmit","formGroup"],["appearance","outline","floatLabel","always"],["matInput","","placeholder","Enter your email","formControlName","email"],["formGroupName","passwordGroup",1,"password-container"],["matInput","","type","password","placeholder","Enter your password","formControlName","password"],["matInput","","type","password","placeholder","Enter your confirm password","formControlName","confirmPassword"],[1,"button-container"],["mat-raised-button","","color","primary"],[2,"flex-grow","1"],["routerLink","../login","skipLocationChange","true"],["color","accent","diameter","20"],[1,"alert","alert-danger"]],template:function(e,r){e&1&&(n(0,"div",0)(1,"fieldset",1)(2,"legend"),l(3,"\uC0AC\uC6A9\uC790 \uC815\uBCF4"),o(),n(4,"form",2),S("ngSubmit",function(){return r.onSubmit()}),n(5,"mat-form-field",3)(6,"mat-label"),l(7,"Email"),o(),d(8,"input",4),m(9,Me,2,1,"mat-error"),o(),n(10,"div",5)(11,"mat-form-field",3)(12,"mat-label"),l(13,"Password"),o(),d(14,"input",6),m(15,ye,2,1,"mat-error"),o(),n(16,"mat-form-field",3)(17,"mat-label"),l(18,"Password"),o(),d(19,"input",7),m(20,Ee,2,1,"mat-error"),o(),m(21,_e,2,0,"mat-error"),o(),n(22,"div",8)(23,"button",9),l(24,"Register "),m(25,we,2,0,"mat-icon"),C(26,"async"),o(),d(27,"span",10),n(28,"a",11),l(29,"Cancel"),o()(),m(30,Fe,4,0),m(31,Se,3,1),o()()()),e&2&&(a(4),F("formGroup",r.myForm),a(5),s(r.myForm.controls.email.invalid?9:-1),a(6),s(r.myForm.controls.passwordGroup.controls.password.invalid?15:-1),a(5),s(r.myForm.controls.passwordGroup.controls.confirmPassword.invalid?20:-1),a(),s(r.myForm.controls.passwordGroup.invalid&&r.myForm.controls.passwordGroup.hasError("mustMatch")&&r.myForm.controls.passwordGroup.controls.confirmPassword.dirty&&(r.myForm.controls.passwordGroup.dirty||r.myForm.controls.passwordGroup.touched)?21:-1),a(4),s(x(26,8,r.loading$)?25:-1),a(5),s(r.isSubmitOk?30:-1),a(),s(r.errorMessage?31:-1))},dependencies:[v,P,A,N,R,T,G,$,B,re,ee,q,V,j,U,k,X,W,z,Y,D,O,I],styles:[".top-container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:row;justify-content:center;align-items:start}.input-container[_ngcontent-%COMP%]{margin-top:100px;padding:20px;width:500px;border:1px solid lightgray;border-radius:5px;display:flex;flex-direction:column;gap:10px}button[_ngcontent-%COMP%]{width:120px}form[_ngcontent-%COMP%]{display:flex;flex-direction:column}form[_ngcontent-%COMP%] > .password-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}form[_ngcontent-%COMP%] > .button-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:end}"]})};var be=[{path:"",component:oe,children:[{path:"login",component:J},{path:"register",component:K}]}],Q=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=w({type:t});static \u0275inj=E({imports:[Z.forChild(be),Z]})};var ne=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=w({type:t});static \u0275inj=E({imports:[v,Q]})};export{ne as AuthModule};
